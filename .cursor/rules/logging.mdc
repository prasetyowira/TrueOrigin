---
description: Creating and editing log messages
globs: *.js*,*.log*,*.ts,*.rs
alwaysApply: false
---

# Logging Guidelines for the Frontend
- Use `console.log()` only for **debugging and error reporting**.
- Remove or disable all development logs before production deployment.

# Logging Guidelines for the Rust

## ğŸ¯ Purpose
Effective logging is essential for debugging, observability, and tracing execution flow in ICP canistersâ€”especially since you canâ€™t attach a debugger or inspect memory post-deploy.

---

## ğŸ§± Use `ic-cdk::print` for Logging

The Internet Computer doesn't support standard `println!` or `log` macros. Instead, use:

```rust
use ic_cdk::print;

print!("Log something");
```

- âœ… Output goes to **stdout**
- âœ… Appears in `dfx canister call` responses (local dev)
- âœ… Visible in logs via DFX or NNS Monitoring Tools

---

## ğŸ“Œ Pattern for Debug Logging

```rust
pub fn log_request(method: &str, caller: Principal) {
    ic_cdk::print(format!("[{}] Called by {}", method, caller));
}
```

Usage:

```rust
#[update]
fn do_something() {
    log_request("do_something", ic_cdk::caller());
    // logic...
}
```

---

## âš ï¸ Logging Warnings & Errors

```rust
fn log_warning(msg: &str) {
    ic_cdk::print(format!("âš ï¸ WARNING: {}", msg));
}

fn log_error(err: &str) {
    ic_cdk::print(format!("âŒ ERROR: {}", err));
}
```

---

## ğŸ” Donâ€™t Log Sensitive Data
- âŒ Passwords, tokens, private keys
- âŒ Full user input
- âœ… Log metadata, execution flow, non-sensitive payloads

---

## âœ… Recommended Tags / Patterns
- `ğŸ” TRACE:` for fine-grained logic
- `ğŸ“ INFO:` for user actions
- `âš ï¸ WARNING:` for potential issues
- `âŒ ERROR:` for real failures

```rust
ic_cdk::print("ğŸ“ INFO: Processing payment event #123");
```

---

## ğŸ› ï¸ Dev Mode vs Prod
- In dev: log as much as possible (trace, debug, values)
- In prod: consider rate-limiting or conditionally enabling logs

```rust
#[cfg(debug_assertions)]
ic_cdk::print("ğŸ” TRACE: Dev-only detailed log");
```

---

## ğŸ“š Related
- [ic-cdk crate](mdc:https:/docs.rs/ic-cdk/latest/ic_cdk/fn.print.html)
- [DFINITY Observability](mdc:https:/internetcomputer.org/docs/current/developer-docs/production/canister-logging)

---

_Updated: 16-April-2025_

---
